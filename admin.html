<html>
<head>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

</head>
<body>
hello
<body>

<form id ="reg">
    First name: <input type="text" name="name"><br>
    password: <input type="text" name="password"><br>
    <input type="submit">
</form>



<button onclick="read( )">Read</button>
<button onclick="add( )">Add data</button>
<button onclick="remove( )">Delete
    data</button>
</body>
<script>

    if (!window.indexedDB) {
        window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");
    }
                var cswdMenuData = [
                    { name: "drew", password:"password"},
                ];

                var db, request = window.indexedDB.open("newDatabase", 1);
                request.onerror = function (event) {
                    console.log("error:");
                };
                request.onsuccess = function (event) {
                    db = request.result;
                    console.log("success:" + db);
                };
                request.onupgradeneeded = function (event) {
                    var db = event.target.result;
                    var objectStore = db.createObjectStore("cswd", {keyPath: "id", autoIncrement:true} );
                    for (var i in cswdMenuData) {
                        objectStore.add(cswdMenuData[i]);
                    }
                };

                function add(name, password) {
                    var request = db.transaction(["cswd"], "readwrite")
                        .objectStore("cswd")
                        .add({name: name, password:password});
                    request.onsuccess = function (event) {
                        alert("Lab has been added to your database.");
                    };
                    request.onerror = function (event) {
                        alert("Unable to add data");
                    }
                };

                function read() {
                    var transaction = db.transaction(["cswd"]);
                    var objectStore = transaction.objectStore("cswd");
                    var request = objectStore.get("02");
                    request.onerror = function (event) {
                        alert("Unable to retrieve data from database!");
                    };
                    request.onsuccess = function (event) {
                        //Do something with the request.result!
                        if (request.result) {
                            alert("Name:" + request.result.name);
                        } else {
                            alert("Name couldn't be found in your database!");
                        }
                    };
                };


                function remove() {
                    var request = db.transaction(["cswd"], "readwrite")
                        .objectStore("cswd")
                        .delete("02");
                    request.onsuccess = function (event) {
                        alert("removed from db");
                    };
                    request.onerror = function (event) {
                        alert("Unable to remove from db!");
                    };
                };

</script>

<script>
    $("#reg").on('submit', function (e) {
        var $inputs = $('form :input');

        var values = {};
        $inputs.each(function() {
            values[this.name] = $(this).val();
            console.log('here')
        });
       console.log("name:", values.name);
       console.log(values);

       var password = values.password
        var hashpassword = [];
        for (var i = 0; i < password.length; i++) {
           // console.log(password.charCodeAt(i));
            var yip = (password.charCodeAt(i) + 15)%24;
            console.log(yip);
            var char = String.fromCharCode(97 + yip)
            hashpassword += char;
            console.log(hashpassword);
        }

        add(values.name, hashpassword)



        //stop form submission
        e.preventDefault();
    });
</script>


</body>


</html>